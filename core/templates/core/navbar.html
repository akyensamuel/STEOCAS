<nav class="w-full bg-gray-100 dark:bg-gray-800 shadow sticky top-0 z-50">
    <div class="container mx-auto px-3 sm:px-4 py-2 sm:py-3">
    {% load group_filters %}
        <!-- Mobile Header with Hamburger -->
        <div class="flex items-center justify-between lg:hidden mb-2">
            <div class="flex items-center gap-2">
                <!-- Back/Forward Buttons -->
                <button onclick="window.history.back()" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition" title="Go Back">
                    <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/>
                    </svg>
                </button>
                
                <a class="text-lg sm:text-xl font-bold text-blue-600 dark:text-blue-400" href="#">STEOCAS</a>
            </div>
            
            <!-- Hamburger Menu Button -->
            <button onclick="toggleMobileMenu()" class="p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition" id="mobile-menu-button">
                <svg class="w-6 h-6 text-gray-800 dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
        </div>
        
        <!-- Desktop Navigation -->
        <div class="hidden lg:flex items-center justify-between">
            <div class="flex items-center gap-2">
                <!-- Back Button -->
                <button onclick="window.history.back()" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition" title="Go Back">
                    <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5H1m0 0 4 4M1 5l4-4"/>
                    </svg>
                </button>
                
                <!-- Forward Button -->
                <button onclick="window.history.forward()" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition" title="Go Forward">
                    <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/>
                    </svg>
                </button>
                
                <a class="text-2xl font-bold text-blue-600 dark:text-blue-400 ml-2" href="#">STEOCAS BRICKS AND TILES</a>
            </div>
            
            <div class="flex items-center gap-3">
                <a href="{% url 'core:logout_to_home' %}" class="px-4 py-2 rounded hover:bg-blue-100 dark:hover:bg-blue-900 transition flex items-center gap-1">
                    <span>Home</span>
                    <svg class="w-5 h-5 text-gray-800 dark:text-white inline-block" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 3.293l6 6V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-4.707l6-6z"/>
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 14V9H7v5"/>
                    </svg>
                </a>
                {% if request.resolver_match.url_name == 'sales_entry' %}
                    {% if user|has_group:'Admin' or user|has_group:'Managers' %}
                        <a href="{% url 'manager_dashboard' %}" class="px-4 py-2 rounded bg-purple-600 text-white hover:bg-purple-700 transition flex items-center gap-1">
                            <span>Manager Dashboard</span>
                            <svg class="w-5 h-5 text-white inline-block" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16">
                                <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="2" fill="none"/>
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 4v4l3 2"/>
                            </svg>
                        </a>
                    {% endif %}
                {% endif %}
                {% if user.is_authenticated %}
                    <a class="px-4 py-2 rounded hover:bg-red-100 dark:hover:bg-red-900 transition flex items-center gap-1" href="{% url 'logout' %}">
                        <span>Logout</span>
                        <svg class="w-5 h-5 text-gray-800 dark:text-white inline-block" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8H1m0 0 4-4M1 8l4 4m7-9h1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"/>
                        </svg>
                    </a>
                {% else %}
                    <a class="px-4 py-2 rounded hover:bg-green-100 dark:hover:bg-green-900 transition flex items-center gap-1" href="{% url 'login' %}">
                        <span>Login</span>
                        <svg class="w-5 h-5 text-gray-800 dark:text-white inline-block" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h11m0 0-4-4m4 4-4 4m-5 3H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h3"/>
                        </svg>
                    </a>
                {% endif %}
                <button class="px-4 py-2 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition" onclick="toggleTheme()">
                    ðŸŒ“ Theme
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu (Hidden by default) -->
        <div id="mobile-menu" class="hidden lg:hidden flex-col gap-2 mt-2 pb-2">
            <a href="{% url 'core:logout_to_home' %}" class="w-full px-4 py-3 rounded hover:bg-blue-100 dark:hover:bg-blue-900 transition flex items-center gap-2 text-base">
                <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 3.293l6 6V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-4.707l6-6z"/>
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 14V9H7v5"/>
                </svg>
                <span>Home</span>
            </a>
            
            {% if request.resolver_match.url_name == 'sales_entry' %}
                {% if user|has_group:'Admin' or user|has_group:'Managers' %}
                    <a href="{% url 'manager_dashboard' %}" class="w-full px-4 py-3 rounded bg-purple-600 text-white hover:bg-purple-700 transition flex items-center gap-2 text-base">
                        <svg class="w-5 h-5 text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16">
                            <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 4v4l3 2"/>
                        </svg>
                        <span>Manager Dashboard</span>
                    </a>
                {% endif %}
            {% endif %}
            
            {% if user.is_authenticated %}
                <a class="w-full px-4 py-3 rounded hover:bg-red-100 dark:hover:bg-red-900 transition flex items-center gap-2 text-base" href="{% url 'logout' %}">
                    <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8H1m0 0 4-4M1 8l4 4m7-9h1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"/>
                    </svg>
                    <span>Logout</span>
                </a>
            {% else %}
                <a class="w-full px-4 py-3 rounded hover:bg-green-100 dark:hover:bg-green-900 transition flex items-center gap-2 text-base" href="{% url 'login' %}">
                    <svg class="w-5 h-5 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h11m0 0-4-4m4 4-4 4m-5 3H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h3"/>
                    </svg>
                    <span>Login</span>
                </a>
            {% endif %}
            
            <button class="w-full px-4 py-3 rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition flex items-center gap-2 text-base" onclick="toggleTheme()">
                <span>ðŸŒ“</span>
                <span>Toggle Theme</span>
            </button>
        </div>
    </div>
    
    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('flex');
        }
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('mobile-menu');
            const button = document.getElementById('mobile-menu-button');
            
            if (menu && !menu.classList.contains('hidden')) {
                if (!menu.contains(event.target) && !button.contains(event.target)) {
                    menu.classList.add('hidden');
                    menu.classList.remove('flex');
                }
            }
        });
    </script>
</nav>